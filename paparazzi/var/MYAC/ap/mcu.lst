   1              		.syntax unified
   2              		.cpu cortex-m3
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 4
  11              		.eabi_attribute 18, 4
  12              		.thumb
  13              		.file	"mcu.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.mcu_init,"ax",%progbits
  18              		.align	1
  19              		.global	mcu_init
  20              		.thumb
  21              		.thumb_func
  23              	mcu_init:
  24              	.LFB29:
  25              		.file 1 "mcu.c"
   1:mcu.c         **** /*
   2:mcu.c         ****  * Paparazzi microcontroller initialisation function
   3:mcu.c         ****  *
   4:mcu.c         ****  * Copyright (C) 2010 The Paparazzi team
   5:mcu.c         ****  *
   6:mcu.c         ****  * This file is part of Paparazzi.
   7:mcu.c         ****  *
   8:mcu.c         ****  * Paparazzi is free software; you can redistribute it and/or modify
   9:mcu.c         ****  * it under the terms of the GNU General Public License as published by
  10:mcu.c         ****  * the Free Software Foundation; either version 2, or (at your option)
  11:mcu.c         ****  * any later version.
  12:mcu.c         ****  *
  13:mcu.c         ****  * Paparazzi is distributed in the hope that it will be useful,
  14:mcu.c         ****  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  15:mcu.c         ****  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  16:mcu.c         ****  * GNU General Public License for more details.
  17:mcu.c         ****  *
  18:mcu.c         ****  * You should have received a copy of the GNU General Public License
  19:mcu.c         ****  * along with Paparazzi; see the file COPYING.  If not, write to
  20:mcu.c         ****  * the Free Software Foundation, 59 Temple Place - Suite 330,
  21:mcu.c         ****  * Boston, MA 02111-1307, USA.
  22:mcu.c         ****  *
  23:mcu.c         ****  */
  24:mcu.c         **** 
  25:mcu.c         **** #include "mcu.h"
  26:mcu.c         **** 
  27:mcu.c         **** #ifdef PERIPHERALS_AUTO_INIT
  28:mcu.c         **** #include "mcu_periph/sys_time.h"
  29:mcu.c         **** #ifdef USE_LED
  30:mcu.c         **** #include "led.h"
  31:mcu.c         **** #endif
  32:mcu.c         **** #if defined RADIO_CONTROL
  33:mcu.c         **** #if defined RADIO_CONTROL_LINK  || defined RADIO_CONTROL_SPEKTRUM_PRIMARY_PORT
  34:mcu.c         **** #include "subsystems/radio_control.h"
  35:mcu.c         **** #endif
  36:mcu.c         **** #endif
  37:mcu.c         **** #if defined USE_UART0 || defined USE_UART1  || defined USE_UART2 || defined USE_UART3 || defined US
  38:mcu.c         **** #include "mcu_periph/uart.h"
  39:mcu.c         **** #endif
  40:mcu.c         **** #if defined USE_I2C0  || defined USE_I2C1  || defined USE_I2C2
  41:mcu.c         **** #include "mcu_periph/i2c.h"
  42:mcu.c         **** #endif
  43:mcu.c         **** #if defined USE_ADC
  44:mcu.c         **** #include "mcu_periph/adc.h"
  45:mcu.c         **** #endif
  46:mcu.c         **** #ifdef USE_USB_SERIAL
  47:mcu.c         **** #include "mcu_periph/usb_serial.h"
  48:mcu.c         **** #endif
  49:mcu.c         **** #ifdef USE_SPI
  50:mcu.c         **** #include "mcu_periph/spi.h"
  51:mcu.c         **** #endif
  52:mcu.c         **** #ifdef USE_DAC
  53:mcu.c         **** #include "mcu_periph/dac.h"
  54:mcu.c         **** #endif
  55:mcu.c         **** #endif /* PERIPHERALS_AUTO_INIT */
  56:mcu.c         **** 
  57:mcu.c         **** void mcu_init(void) {
  26              		.loc 1 57 0
  27              		.cfi_startproc
  28              		@ args = 0, pretend = 0, frame = 8
  29              		@ frame_needed = 0, uses_anonymous_args = 0
  30 0000 F7B5     		push	{r0, r1, r2, r4, r5, r6, r7, lr}
  31              	.LCFI0:
  32              		.cfi_def_cfa_offset 32
  33              		.cfi_offset 14, -4
  34              		.cfi_offset 7, -8
  35              		.cfi_offset 6, -12
  36              		.cfi_offset 5, -16
  37              		.cfi_offset 4, -20
  38              		.cfi_offset 2, -24
  39              		.cfi_offset 1, -28
  40              		.cfi_offset 0, -32
  41              	.LBB9:
  42              	.LBB10:
  43              	.LBB11:
  44              		.file 2 "led.h"
   1:led.h         **** /*
   2:led.h         ****  * $Id$
   3:led.h         ****  *
   4:led.h         ****  * Copyright (C) 2003-2005  Antoine Drouin
   5:led.h         ****  *
   6:led.h         ****  * This file is part of paparazzi.
   7:led.h         ****  *
   8:led.h         ****  * paparazzi is free software; you can redistribute it and/or modify
   9:led.h         ****  * it under the terms of the GNU General Public License as published by
  10:led.h         ****  * the Free Software Foundation; either version 2, or (at your option)
  11:led.h         ****  * any later version.
  12:led.h         ****  *
  13:led.h         ****  * paparazzi is distributed in the hope that it will be useful,
  14:led.h         ****  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  15:led.h         ****  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  16:led.h         ****  * GNU General Public License for more details.
  17:led.h         ****  *
  18:led.h         ****  * You should have received a copy of the GNU General Public License
  19:led.h         ****  * along with paparazzi; see the file COPYING.  If not, write to
  20:led.h         ****  * the Free Software Foundation, 59 Temple Place - Suite 330,
  21:led.h         ****  * Boston, MA 02111-1307, USA.
  22:led.h         ****  *
  23:led.h         ****  */
  24:led.h         **** 
  25:led.h         **** /** \file led.h
  26:led.h         ****  *  \brief arch independent LED (Light Emitting Diodes) API
  27:led.h         ****  *
  28:led.h         ****  *
  29:led.h         ****  */
  30:led.h         **** 
  31:led.h         **** #ifndef LED_H
  32:led.h         **** #define LED_H
  33:led.h         **** 
  34:led.h         **** #if defined USE_LED
  35:led.h         **** 
  36:led.h         **** #include "led_hw.h"
  37:led.h         **** 
  38:led.h         **** static inline void led_init ( void ) {
  39:led.h         **** #if USE_LED_1
  40:led.h         ****   LED_INIT(1);
  45              		.loc 2 40 0
  46 0002 364D     		ldr	r5, .L2
  47              	.LBE11:
  48              	.LBE10:
  49              	.LBE9:
  58:mcu.c         **** 
  59:mcu.c         ****   mcu_arch_init();
  50              		.loc 1 59 0
  51 0004 FFF7FEFF 		bl	mcu_arch_init
  60:mcu.c         **** 
  61:mcu.c         **** #ifdef PERIPHERALS_AUTO_INIT
  62:mcu.c         ****   sys_time_init();
  52              		.loc 1 62 0
  53 0008 FFF7FEFF 		bl	sys_time_init
  54              	.LBB19:
  55              	.LBB18:
  56              	.LBB12:
  57              		.loc 2 40 0
  58 000c 0420     		movs	r0, #4
  59 000e 0121     		movs	r1, #1
  60 0010 1024     		movs	r4, #16
  61 0012 FFF7FEFF 		bl	RCC_APB2PeriphClockCmd
  62 0016 0326     		movs	r6, #3
  63 0018 4FF48077 		mov	r7, #256
  64 001c 2846     		mov	r0, r5
  65 001e 01A9     		add	r1, sp, #4
  66 0020 ADF80470 		strh	r7, [sp, #4]	@ movhi
  67 0024 8DF80740 		strb	r4, [sp, #7]
  68 0028 8DF80660 		strb	r6, [sp, #6]
  69 002c FFF7FEFF 		bl	GPIO_Init
  70              	.LBE12:
  41:led.h         ****   LED_OFF(1);
  71              		.loc 2 41 0
  72 0030 2F61     		str	r7, [r5, #16]
  73              	.LBB13:
  42:led.h         **** #endif /* LED_1 */
  43:led.h         **** 
  44:led.h         **** #if USE_LED_2
  45:led.h         ****   LED_INIT(2);
  74              		.loc 2 45 0
  75 0032 0920     		movs	r0, #9
  76 0034 0121     		movs	r1, #1
  77 0036 05F58065 		add	r5, r5, #1024
  78 003a FFF7FEFF 		bl	RCC_APB2PeriphClockCmd
  79 003e 2846     		mov	r0, r5
  80 0040 01A9     		add	r1, sp, #4
  81 0042 ADF80440 		strh	r4, [sp, #4]	@ movhi
  82 0046 8DF80740 		strb	r4, [sp, #7]
  83 004a 8DF80660 		strb	r6, [sp, #6]
  84 004e FFF7FEFF 		bl	GPIO_Init
  85 0052 0121     		movs	r1, #1
  86 0054 2248     		ldr	r0, .L2+4
  87 0056 FFF7FEFF 		bl	GPIO_PinRemapConfig
  88              	.LBE13:
  89              	.LBB14:
  46:led.h         ****   LED_OFF(2);
  47:led.h         **** #endif /* LED_2 */
  48:led.h         **** 
  49:led.h         **** #if USE_LED_3
  50:led.h         ****   LED_INIT(3);
  90              		.loc 2 50 0
  91 005a 0427     		movs	r7, #4
  92              	.LBE14:
  46:led.h         ****   LED_OFF(2);
  93              		.loc 2 46 0
  94 005c 2C61     		str	r4, [r5, #16]
  95              	.LBB15:
  96              		.loc 2 50 0
  97 005e 2046     		mov	r0, r4
  98 0060 05F58065 		add	r5, r5, #1024
  99 0064 0121     		movs	r1, #1
 100 0066 FFF7FEFF 		bl	RCC_APB2PeriphClockCmd
 101 006a 0DEB0701 		add	r1, sp, r7
 102 006e 2846     		mov	r0, r5
 103 0070 ADF80470 		strh	r7, [sp, #4]	@ movhi
 104 0074 8DF80740 		strb	r4, [sp, #7]
 105 0078 8DF80660 		strb	r6, [sp, #6]
 106 007c FFF7FEFF 		bl	GPIO_Init
 107              	.LBE15:
  51:led.h         ****   LED_OFF(3);
 108              		.loc 2 51 0
 109 0080 2F61     		str	r7, [r5, #16]
 110              	.LBB16:
  52:led.h         **** #endif /* LED_3 */
  53:led.h         **** 
  54:led.h         **** #if USE_LED_4
  55:led.h         ****   LED_INIT(4);
 111              		.loc 2 55 0
 112 0082 2046     		mov	r0, r4
 113 0084 0121     		movs	r1, #1
 114 0086 FFF7FEFF 		bl	RCC_APB2PeriphClockCmd
 115 008a 2027     		movs	r7, #32
 116 008c 2846     		mov	r0, r5
 117 008e 01A9     		add	r1, sp, #4
 118 0090 ADF80470 		strh	r7, [sp, #4]	@ movhi
 119 0094 8DF80740 		strb	r4, [sp, #7]
 120 0098 8DF80660 		strb	r6, [sp, #6]
 121 009c FFF7FEFF 		bl	GPIO_Init
 122              	.LBE16:
  56:led.h         ****   LED_OFF(4);
 123              		.loc 2 56 0
 124 00a0 2F61     		str	r7, [r5, #16]
 125              	.LBB17:
  57:led.h         **** #endif /* LED_4 */
  58:led.h         **** 
  59:led.h         **** #if USE_LED_5
  60:led.h         ****   LED_INIT(5);
 126              		.loc 2 60 0
 127 00a2 2046     		mov	r0, r4
 128 00a4 0121     		movs	r1, #1
 129 00a6 FFF7FEFF 		bl	RCC_APB2PeriphClockCmd
 130 00aa 4FF40047 		mov	r7, #32768
 131 00ae 2846     		mov	r0, r5
 132 00b0 01A9     		add	r1, sp, #4
 133 00b2 ADF80470 		strh	r7, [sp, #4]	@ movhi
 134 00b6 8DF80740 		strb	r4, [sp, #7]
 135 00ba 8DF80660 		strb	r6, [sp, #6]
 136 00be FFF7FEFF 		bl	GPIO_Init
 137              	.LBE17:
  61:led.h         ****   LED_OFF(5);
 138              		.loc 2 61 0
 139 00c2 2F61     		str	r7, [r5, #16]
 140              	.LBE18:
 141              	.LBE19:
  63:mcu.c         **** #ifdef USE_LED
  64:mcu.c         ****   led_init();
  65:mcu.c         **** #endif
  66:mcu.c         ****   /* for now this means using spektrum */
  67:mcu.c         **** #if defined RADIO_CONTROL & defined RADIO_CONTROL_SPEKTRUM_PRIMARY_PORT & defined RADIO_CONTROL_BIN
  68:mcu.c         ****   RADIO_CONTROL_BIND_IMPL_FUNC();
 142              		.loc 1 68 0
 143 00c4 FFF7FEFF 		bl	radio_control_spektrum_try_bind
  69:mcu.c         **** #endif
  70:mcu.c         **** #ifdef USE_UART0
  71:mcu.c         ****   uart0_init();
  72:mcu.c         **** #endif
  73:mcu.c         **** #ifdef USE_UART1
  74:mcu.c         ****   uart1_init();
  75:mcu.c         **** #endif
  76:mcu.c         **** #ifdef USE_UART2
  77:mcu.c         ****   uart2_init();
 144              		.loc 1 77 0
 145 00c8 FFF7FEFF 		bl	uart2_init
  78:mcu.c         **** #endif
  79:mcu.c         **** #ifdef USE_UART3
  80:mcu.c         ****   uart3_init();
 146              		.loc 1 80 0
 147 00cc FFF7FEFF 		bl	uart3_init
  81:mcu.c         **** #endif
  82:mcu.c         **** #ifdef USE_UART4
  83:mcu.c         ****   uart4_init();
  84:mcu.c         **** #endif
  85:mcu.c         **** #ifdef USE_UART5
  86:mcu.c         ****   uart5_init();
  87:mcu.c         **** #endif
  88:mcu.c         **** #ifdef USE_I2C0
  89:mcu.c         ****   i2c0_init();
  90:mcu.c         **** #endif
  91:mcu.c         **** #ifdef USE_I2C1
  92:mcu.c         ****   i2c1_init();
  93:mcu.c         **** #endif
  94:mcu.c         **** #ifdef USE_I2C2
  95:mcu.c         ****   i2c2_init();
  96:mcu.c         **** #endif
  97:mcu.c         **** #ifdef USE_ADC
  98:mcu.c         ****   adc_init();
 148              		.loc 1 98 0
 149 00d0 FFF7FEFF 		bl	adc_init
  99:mcu.c         **** #endif
 100:mcu.c         **** #ifdef USE_USB_SERIAL
 101:mcu.c         ****   VCOM_init();
 102:mcu.c         **** #endif
 103:mcu.c         **** #ifdef USE_SPI
 104:mcu.c         ****   spi_init();
 150              		.loc 1 104 0
 151 00d4 FFF7FEFF 		bl	spi_init
 105:mcu.c         **** #endif
 106:mcu.c         **** #ifdef USE_DAC
 107:mcu.c         ****   dac_init();
 108:mcu.c         **** #endif
 109:mcu.c         **** #endif /* PERIPHERALS_AUTO_INIT */
 110:mcu.c         **** 
 111:mcu.c         **** }
 152              		.loc 1 111 0
 153 00d8 FEBD     		pop	{r1, r2, r3, r4, r5, r6, r7, pc}
 154              	.L3:
 155 00da 00BF     		.align	2
 156              	.L2:
 157 00dc 00080140 		.word	1073809408
 158 00e0 00013000 		.word	3145984
 159              		.cfi_endproc
 160              	.LFE29:
 162              		.text
 163              	.Letext0:
 164              		.file 3 "/opt/paparazzi/arm-multilib/lib/gcc/arm-none-eabi/4.6.2/../../../../arm-none-eabi/include
 165              		.file 4 "/home/uav/paparazzi/sw/include/std.h"
 166              		.file 5 "mcu_periph/sys_time.h"
 167              		.file 6 "/opt/paparazzi/arm-multilib/lib/gcc/arm-none-eabi/4.6.2/../../../../arm-none-eabi/include
 168              		.file 7 "/opt/paparazzi/arm-multilib/lib/gcc/arm-none-eabi/4.6.2/../../../../arm-none-eabi/include
 169              		.file 8 "./paparazzi.h"
 170              		.file 9 "subsystems/radio_control.h"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 mcu.c
     /tmp/ccrnOv3m.s:18     .text.mcu_init:0000000000000000 $t
     /tmp/ccrnOv3m.s:23     .text.mcu_init:0000000000000000 mcu_init
     /tmp/ccrnOv3m.s:157    .text.mcu_init:00000000000000dc $d
                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
mcu_arch_init
sys_time_init
RCC_APB2PeriphClockCmd
GPIO_Init
GPIO_PinRemapConfig
radio_control_spektrum_try_bind
uart2_init
uart3_init
adc_init
spi_init
